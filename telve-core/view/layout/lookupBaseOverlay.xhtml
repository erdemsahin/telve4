<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <p:fragment id="frmovl">
        <div class="row">
            <h:panelGroup layout="block" styleClass="large-12 small-12 medium-12 columns">
                <ui:fragment rendered="#{not hideStandartFilter}">
                    <p:fragment>
                        <p:outputLabel for="search2key" value="#{messages['general.label.SearchKey']}" />
                        <h:panelGroup styleClass="ui-input-group" layout="block" >
                            <p:inputText id="search2key" value="#{bean.model.searchText}" />
                            <p:commandButton id="search2" icon="ui-icon-search" action="#{bean.search()}" update="resultLists" styleClass="ui-icon-only" 
                                             partialSubmit="true" process="search2key"/>
                        </h:panelGroup>
                    </p:fragment>
                </ui:fragment>
            </h:panelGroup>



            <h:panelGroup id="resultLists" layout="block" styleClass="large-12 small-12 medium-12 columns">

                <c:if test="#{ bean.model.modelType eq 'Table' and bean.model.getMultiSelect()}" >
                    <p:dataTable id="multiSelectDialog" var="item" value="#{bean.model.dataModel()}" 
                                 selection="#{bean.model.selectedDatas}" rows="5"  paginator="true"
                                 paginatorPosition="bottom" 
                                 paginatorAlwaysVisible="false">

                        <p:column selectionMode="multiple" style="width:36px;" />  

                        <c:forEach items="#{bean.model.columns.entrySet()}" var="col" varStatus="loop">
                            <p:column headerText="#{messages[col.value]}">
                                #{item[col.key]}
                            </p:column>
                        </c:forEach>
                    </p:dataTable>
                </c:if>

                <c:if test="#{ bean.model.modelType eq 'Table' and not bean.model.getMultiSelect()}" >

                    <p:dataTable id="singleSelectDialog" var="item" value="#{bean.model.dataModel()}" 
                                 selection="#{bean.model.selectedData}" rows="5"  paginator="true"
                                 paginatorPosition="bottom" 
                                 paginatorAlwaysVisible="false">

                        <p:column selectionMode="single" style="width:36px;" />  

                        <c:forEach items="#{bean.model.columns.entrySet()}" var="col" varStatus="loop">
                            <p:column headerText="#{messages[col.value]}">
                                #{item[col.key]}
                            </p:column>
                        </c:forEach>
                    </p:dataTable>
                </c:if>

                <c:if test="#{bean.model.modelType eq 'Tree' and bean.model.getMultiSelect()}" >

                    <p:tree id="multiSelectTreeDialog" value="#{bean.model.dataModel()}" var="node"  
                            selectionMode="checkbox"  
                            selection="#{bean.model.selectedDatas}"  styleClass="large-12 medium-12 small-12 columns" style="width: 100%; ; max-height: 250px;">  

                        <p:treeNode>  
                            <h:outputText value="#{node.caption}" />  
                        </p:treeNode>  
                    </p:tree> 
                </c:if>

                <c:if test="#{bean.model.modelType eq 'Tree' and not bean.model.getMultiSelect()}" >

                    <p:tree id="singleSelectTreeDialog" value="#{bean.model.dataModel()}" var="node"  
                            selectionMode="single"  
                            selection="#{bean.model.selectedData}" styleClass="large-12 small-12 medium-12 columns" style="width: 100%; max-height: 250px;">  

                        <p:treeNode>  
                            <h:outputText value="#{node.caption}" />  
                        </p:treeNode>  
                    </p:tree>  
                </c:if>
            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="large-12 small-12 medium-12 columns">
                <div class="actionButtons">
                    <p:commandButton value="#{messages['general.button.Ok']}"  
                                     action="#{bean.closeOverlay()}" ajax="true" 
                                     onsuccess="PF('#{widgetVar}').hide();" update="#{update}"
                                     partialSubmit="true" process="frmovl"
                                     icon="ui-icon-check"/>
                    <p:commandButton value="#{messages['general.button.Cancel']}" type="button" onclick="PF('#{widgetVar}').hide();" 
                                     icon="ui-icon-close"/>
                </div>
            </h:panelGroup>

        </div>
    </p:fragment>
</ui:composition>
