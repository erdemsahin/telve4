<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://java.sun.com/jsf/composite/telveComponents"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"                   
                template="/layout/paramBase.xhtml">

    <ui:param name="homeBean" value="#{roleHome}" />
    <ui:param name="itemList" value="#{roleHome.entityList}" />
    <ui:param name="entityName" value="role" />
    <ui:param name="itemCaption" value="code" />
    <ui:param name="renderActive" value="true" />


    <ui:define name="form">
        <div class="row">
            <t:inputText label="general.label.Name" value="#{roleHome.entity.code}" required="true" />
        </div>            

        <div class="row">        
            <t:inputTextarea label="general.label.Info" value="#{roleHome.entity.info}" required="false" />                                            
            <t:inputCheckboxGroup label="general.label.Status">
                <p:selectBooleanCheckbox value="#{roleHome.entity.active}" itemLabel="#{messages['general.label.Active']}" />
            </t:inputCheckboxGroup>
        </div>  

        <script type="text/javascript">
            function toggleChkBoxes(group, act) {
                jQuery('[id*="' + group + '"]').find('[id$="' + act + '"] div').trigger('click');
            }

            function toggleRowChkBoxes(group, elm) {
                row = jQuery(elm).parent().parent().attr('data-ri');
                jQuery('[id*="' + group + '\\:' + row + '\\:"] div.ui-chkbox-box').trigger('click');
            }
        </script>
        <c:forEach id="groups" items="#{roleHome.permissions}"
                   var="pg" varStatus="pgs">
            <t:accordion id="#{pg.name}a" label="#{messages[ 'permission.label.'.concat( pg.name )]}" hide="true">

                <p:dataTable id="#{pg.name}" value="#{pg.permissions}" var="pd" >
                    <p:column headerText="#{messages['role.label.Domain']}">
                        <a href="#" onclick="toggleRowChkBoxes('#{pg.name}', this);
                                return false;" title="#{messages[ 'permission.hint.'.concat( pd.definition.target)]}">
                            #{messages[ 'permission.label.'.concat( pd.definition.target)]}
                        </a>
                    </p:column>
                    <p:column style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-eye" title="#{messages['role.label.Select']}" onclick="toggleChkBoxes('#{pg.name}', 'select')"></i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="select" value="#{pd.select}" rendered="#{pd.definition.hasSelectAction()}"/>  
                    </p:column>
                    <p:column style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-plus" title="#{messages['role.label.Insert']}" onclick="toggleChkBoxes('#{pg.name}', 'insert')"></i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="insert" value="#{pd.insert}" rendered="#{pd.definition.hasInsertAction()}"/> 
                    </p:column>
                    <p:column  style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-edit" title="#{messages['role.label.Update']}" onclick="toggleChkBoxes('#{pg.name}', 'update')"></i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="update" value="#{pd.update}" rendered="#{pd.definition.hasUpdateAction()}"/> 
                    </p:column>
                    <p:column style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-trash" title="#{messages['role.label.Delete']}" onclick="toggleChkBoxes('#{pg.name}', 'delete')"></i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="delete" value="#{pd.delete}" rendered="#{pd.definition.hasDeleteAction()}"/> 
                    </p:column>
                    <p:column style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-share-square-o" title="#{messages['role.label.Export']}" onclick="toggleChkBoxes('#{pg.name}', 'export')"></i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="export" value="#{pd.export}" rendered="#{pd.definition.hasExportAction()}"/> 
                    </p:column>
                    <p:column style="width: 36px;">
                        <f:facet name="header">
                            <i class="fa fa-gear" title="#{messages['role.label.Exec']}" onclick="toggleChkBoxes('#{pg.name}', 'exec')"> </i>
                        </f:facet>
                        <p:selectBooleanCheckbox id="exec" value="#{pd.exec}" rendered="#{pd.definition.hasExecAction()}"/> 
                    </p:column>
                </p:dataTable>
            </t:accordion>
        </c:forEach>


    </ui:define> 
</ui:composition>